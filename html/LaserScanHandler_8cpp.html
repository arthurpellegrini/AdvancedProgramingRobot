<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Turtlebot: src/LaserScanHandler.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="resized_logo.jpeg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Turtlebot
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">LaserScanHandler.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Receives and processes LaserScan data from a TCP socket.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="LaserScanHandler_8h_source.html">LaserScanHandler.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="SharedMemory_8h_source.html">SharedMemory.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for LaserScanHandler.cpp:</div>
<div class="dyncontent">
<div class="center"><img src="LaserScanHandler_8cpp__incl.png" border="0" usemap="#src_2LaserScanHandler_8cpp" alt=""/></div>
<map name="src_2LaserScanHandler_8cpp" id="src_2LaserScanHandler_8cpp">
<area shape="rect" title="Receives and processes LaserScan data from a TCP socket." alt="" coords="319,5,508,32"/>
<area shape="rect" href="LaserScanHandler_8h.html" title="Handles the reception and storage of LaserScan data." alt="" coords="599,80,750,107"/>
<area shape="rect" href="SharedMemory_8h.html" title="Provides shared memory and semaphore management for data synchronization." alt="" coords="88,155,219,181"/>
<area shape="rect" title=" " alt="" coords="1161,155,1236,181"/>
<area shape="rect" title=" " alt="" coords="243,155,301,181"/>
<area shape="rect" title=" " alt="" coords="325,155,472,181"/>
<area shape="rect" title=" " alt="" coords="852,229,932,256"/>
<area shape="rect" title=" " alt="" coords="547,155,621,181"/>
<area shape="rect" title=" " alt="" coords="645,155,704,181"/>
<area shape="rect" title=" " alt="" coords="1123,229,1189,256"/>
<area shape="rect" title=" " alt="" coords="5,229,80,256"/>
<area shape="rect" title=" " alt="" coords="729,155,821,181"/>
<area shape="rect" title=" " alt="" coords="845,155,947,181"/>
<area shape="rect" title=" " alt="" coords="972,155,1047,181"/>
<area shape="rect" title=" " alt="" coords="1071,155,1137,181"/>
<area shape="rect" title=" " alt="" coords="387,229,493,256"/>
<area shape="rect" title=" " alt="" coords="105,229,207,256"/>
<area shape="rect" title=" " alt="" coords="231,229,294,256"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ac147f0f17421af3db18b74cabee55b1d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="LaserScanHandler_8cpp.html#ac147f0f17421af3db18b74cabee55b1d">ReceiveAndSaveLaserScanData</a> (int sock, <a class="el" href="structSharedData.html">SharedData</a> *shared, sem_t *laserSemaphore)</td></tr>
<tr class="memdesc:ac147f0f17421af3db18b74cabee55b1d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Receives and saves LaserScan data from a socket.  <a href="LaserScanHandler_8cpp.html#ac147f0f17421af3db18b74cabee55b1d">More...</a><br /></td></tr>
<tr class="separator:ac147f0f17421af3db18b74cabee55b1d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Receives and processes LaserScan data from a TCP socket. </p>
<p>This function continuously receives LaserScan data from the specified socket, processes it, and saves filtered JSON data to a file. The data is also written into shared memory for inter-process communication. The function ensures thread safety using semaphores.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sock</td><td>The socket descriptor used to receive data. </td></tr>
    <tr><td class="paramname">shared</td><td>Pointer to the shared memory structure for storing LaserScan data. </td></tr>
    <tr><td class="paramname">laserSemaphore</td><td>Pointer to the semaphore for synchronizing shared memory access.</td></tr>
  </table>
  </dd>
</dl>
<p>The received data is expected to be in a custom format, starting with <code>---START---</code> and ending with <code>___END___</code>. The content between these markers is parsed as JSON. Relevant fields such as <code>angle_increment</code> and <code>ranges</code> are extracted, written to a JSON file, and stored in shared memory.</p>
<dl class="section note"><dt>Note</dt><dd>Ensure that the specified socket is connected to the correct server before calling this function. The directory <code>./tmp</code> is created to store the output file <code>laser_data.json</code>. </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="ac147f0f17421af3db18b74cabee55b1d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac147f0f17421af3db18b74cabee55b1d">&#9670;&nbsp;</a></span>ReceiveAndSaveLaserScanData()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ReceiveAndSaveLaserScanData </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structSharedData.html">SharedData</a> *&#160;</td>
          <td class="paramname"><em>shared</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">sem_t *&#160;</td>
          <td class="paramname"><em>laserSemaphore</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Receives and saves LaserScan data from a socket. </p>
<p>This function handles the reception of LaserScan data from the given socket, processes it, and stores it in shared memory. Synchronization is managed using the provided semaphore to ensure thread safety.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sock</td><td>The socket descriptor used to receive data. </td></tr>
    <tr><td class="paramname">shared</td><td>Pointer to the shared memory structure where data will be stored. </td></tr>
    <tr><td class="paramname">laserSemaphore</td><td>Pointer to the semaphore used for synchronizing access to shared memory.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Ensure the socket is connected to the correct server and port before calling this function.</dd></dl>
<p>The function operates in a loop, continuously receiving data and writing it to the shared memory. Each data entry is timestamped for debugging and analysis purposes. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
