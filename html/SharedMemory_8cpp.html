<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Turtlebot: src/SharedMemory.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="resized_logo.jpeg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Turtlebot
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">SharedMemory.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Initializes shared memory and semaphores for inter-process communication.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="SharedMemory_8h_source.html">SharedMemory.h</a>&quot;</code><br />
<code>#include &lt;sys/mman.h&gt;</code><br />
<code>#include &lt;fcntl.h&gt;</code><br />
<code>#include &lt;unistd.h&gt;</code><br />
<code>#include &lt;cstring&gt;</code><br />
<code>#include &lt;iostream&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for SharedMemory.cpp:</div>
<div class="dyncontent">
<div class="center"><img src="SharedMemory_8cpp__incl.png" border="0" usemap="#asrc_2SharedMemory_8cpp" alt=""/></div>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ad7050c40a17e3f7b3bc99144847de7b8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="SharedMemory_8cpp.html#ad7050c40a17e3f7b3bc99144847de7b8">LASER_SEM_NAME</a>&#160;&#160;&#160;&quot;/laserSem&quot;</td></tr>
<tr class="memdesc:ad7050c40a17e3f7b3bc99144847de7b8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Name for the semaphore used to synchronize LaserScan data.  <a href="SharedMemory_8cpp.html#ad7050c40a17e3f7b3bc99144847de7b8">More...</a><br /></td></tr>
<tr class="separator:ad7050c40a17e3f7b3bc99144847de7b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abdee599c749c813ffb20413aee1df788"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="SharedMemory_8cpp.html#abdee599c749c813ffb20413aee1df788">ODOM_SEM_NAME</a>&#160;&#160;&#160;&quot;/odomSem&quot;</td></tr>
<tr class="memdesc:abdee599c749c813ffb20413aee1df788"><td class="mdescLeft">&#160;</td><td class="mdescRight">Name for the semaphore used to synchronize Odometry data.  <a href="SharedMemory_8cpp.html#abdee599c749c813ffb20413aee1df788">More...</a><br /></td></tr>
<tr class="separator:abdee599c749c813ffb20413aee1df788"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aa24f4bdd8cee7b6681e136286e5bf641"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structSharedData.html">SharedData</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="SharedMemory_8cpp.html#aa24f4bdd8cee7b6681e136286e5bf641">InitializeSharedMemory</a> (sem_t *&amp;laserSemaphore, sem_t *&amp;odometrySemaphore)</td></tr>
<tr class="memdesc:aa24f4bdd8cee7b6681e136286e5bf641"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes shared memory and semaphores.  <a href="SharedMemory_8cpp.html#aa24f4bdd8cee7b6681e136286e5bf641">More...</a><br /></td></tr>
<tr class="separator:aa24f4bdd8cee7b6681e136286e5bf641"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ccfb5d14692a55b8a4697924c268351"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="SharedMemory_8cpp.html#a1ccfb5d14692a55b8a4697924c268351">CleanupSharedMemory</a> (<a class="el" href="structSharedData.html">SharedData</a> *shared, sem_t *laserSemaphore, sem_t *odometrySemaphore)</td></tr>
<tr class="memdesc:a1ccfb5d14692a55b8a4697924c268351"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cleans up shared memory and semaphores.  <a href="SharedMemory_8cpp.html#a1ccfb5d14692a55b8a4697924c268351">More...</a><br /></td></tr>
<tr class="separator:a1ccfb5d14692a55b8a4697924c268351"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Initializes shared memory and semaphores for inter-process communication. </p>
<p>This function sets up shared memory and semaphores for synchronizing access to shared LaserScan and Odometry data between processes. It creates or opens the shared memory and semaphores, initializing them as needed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">laserSemaphore</td><td>Reference to a pointer for the LaserScan semaphore. </td></tr>
    <tr><td class="paramname">odometrySemaphore</td><td>Reference to a pointer for the Odometry semaphore. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer to the allocated and initialized shared memory structure.</dd></dl>
<p>The function uses <code>shm_open</code> to create or open shared memory and maps it into the process address space. Semaphores are created or opened with initial values of <code>1</code> to allow for mutual exclusion during data access.</p>
<dl class="section note"><dt>Note</dt><dd>The shared memory and semaphores must be cleaned up using <code>CleanupSharedMemory</code> to prevent resource leaks. </dd></dl>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ad7050c40a17e3f7b3bc99144847de7b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad7050c40a17e3f7b3bc99144847de7b8">&#9670;&nbsp;</a></span>LASER_SEM_NAME</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LASER_SEM_NAME&#160;&#160;&#160;&quot;/laserSem&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Name for the semaphore used to synchronize LaserScan data. </p>

</div>
</div>
<a id="abdee599c749c813ffb20413aee1df788"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abdee599c749c813ffb20413aee1df788">&#9670;&nbsp;</a></span>ODOM_SEM_NAME</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ODOM_SEM_NAME&#160;&#160;&#160;&quot;/odomSem&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Name for the semaphore used to synchronize Odometry data. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a1ccfb5d14692a55b8a4697924c268351"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1ccfb5d14692a55b8a4697924c268351">&#9670;&nbsp;</a></span>CleanupSharedMemory()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CleanupSharedMemory </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structSharedData.html">SharedData</a> *&#160;</td>
          <td class="paramname"><em>shared</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">sem_t *&#160;</td>
          <td class="paramname"><em>laserSemaphore</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">sem_t *&#160;</td>
          <td class="paramname"><em>odometrySemaphore</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Cleans up shared memory and semaphores. </p>
<p>This function unmaps and unlinks the shared memory and closes and unlinks the semaphores created or used during the program execution.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">shared</td><td>Pointer to the shared memory structure to be cleaned up. </td></tr>
    <tr><td class="paramname">laserSemaphore</td><td>Pointer to the semaphore for LaserScan data synchronization. </td></tr>
    <tr><td class="paramname">odometrySemaphore</td><td>Pointer to the semaphore for Odometry data synchronization.</td></tr>
  </table>
  </dd>
</dl>
<p>The function ensures that all resources allocated for shared memory and semaphores are released properly. This includes unmapping the memory, unlinking the shared memory file, and closing and unlinking the semaphores. </p>

</div>
</div>
<a id="aa24f4bdd8cee7b6681e136286e5bf641"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa24f4bdd8cee7b6681e136286e5bf641">&#9670;&nbsp;</a></span>InitializeSharedMemory()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structSharedData.html">SharedData</a>* InitializeSharedMemory </td>
          <td>(</td>
          <td class="paramtype">sem_t *&amp;&#160;</td>
          <td class="paramname"><em>laserSemaphore</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">sem_t *&amp;&#160;</td>
          <td class="paramname"><em>odometrySemaphore</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes shared memory and semaphores. </p>
<p>This function allocates memory for the shared data structure and initializes semaphores for synchronizing access to LaserScan and Odometry data.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">laserSemaphore</td><td>Reference to a pointer for the LaserScan semaphore. </td></tr>
    <tr><td class="paramname">odometrySemaphore</td><td>Reference to a pointer for the Odometry semaphore. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer to the allocated and initialized shared data structure.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>The returned shared memory must be cleaned up with <code>CleanupSharedMemory</code> to prevent memory leaks and ensure semaphore destruction. </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
